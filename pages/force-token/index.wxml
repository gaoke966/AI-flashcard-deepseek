<cu-custom>
  <view slot="content">强制Token设置</view>
</cu-custom>

<view class="cu-card case">
  <view class="cu-item shadow">
    <view class="cu-bar bg-white solid-bottom">
      <view class="action">
        <text class="cuIcon-title text-blue"></text>当前Token状态
      </view>
    </view>
    <view class="padding">
      <view class="cu-item">
        <text class="text-grey text-bold">当前Token:</text>
        <text class="text-break">{{currentToken}}</text>
      </view>
      <view wx:if="{{successMessage}}" class="cu-item">
        <text class="text-green">{{successMessage}}</text>
      </view>
    </view>
  </view>
</view>

<view class="cu-card case">
  <view class="cu-item shadow">
    <view class="cu-bar bg-white solid-bottom">
      <view class="action">
        <text class="cuIcon-title text-green"></text>快速修复
      </view>
    </view>
    <view class="padding">
      <view class="padding-bottom">
        <text class="text-grey">如果无法正常获取Token，使用以下快速修复方法：</text>
      </view>
      
      <button class="cu-btn bg-blue margin-tb-sm block" bindtap="generateAndSetToken">
        🚀 生成并设置新Token
      </button>
      
      <view class="padding-tb">
        <text class="text-grey">或手动输入Token：</text>
      </view>
      
      <input class="cu-input" placeholder="请输入Token" value="{{newToken}}" bindinput="inputToken" />
      
      <button class="cu-btn bg-green margin-tb-sm block" bindtap="setManualToken">
        📝 设置手动Token
      </button>
      
      <button class="cu-btn bg-orange margin-tb-sm block" bindtap="copyCurrentToken">
        📋 复制当前Token
      </button>
      
      <button class="cu-btn bg-red margin-tb-sm block" bindtap="clearAllTokens">
        🗑️ 清除所有Token
      </button>
    </view>
  </view>
</view>

<view class="cu-card case">
  <view class="cu-item shadow">
    <view class="cu-bar bg-white solid-bottom">
      <view class="action">
        <text class="cuIcon-title text-purple"></text>功能测试
      </view>
    </view>
    <view class="padding">
      <button class="cu-btn bg-purple margin-tb-sm block" bindtap="testApiRequest">
        🧪 测试API请求
      </button>
      
      <button class="cu-btn bg-cyan margin-tb-sm block" bindtap="goToBoxPage">
        📱 跳转卡集页面
      </button>
    </view>
  </view>
</view>

<view class="cu-card case">
  <view class="cu-item shadow">
    <view class="cu-bar bg-white solid-bottom">
      <view class="action">
        <text class="cuIcon-title text-grey"></text>使用说明
      </view>
    </view>
    <view class="padding text-sm">
      <text class="text-grey">
        1. 首先点击"生成并设置新Token"
        2. 确认看到"Token设置成功"提示
        3. 点击"测试API请求"验证功能
        4. 测试成功后跳转到卡集页面使用
      </text>
    </view>
  </view>
</view>